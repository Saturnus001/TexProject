%! suppress、MissingLabel
%! Author = admin
%! Date = 2023/12/17

% Preamble
\documentclass[a4paper]{article}

% Packages
%基本格式
\usepackage[margin=1in]{geometry}
\usepackage[fontset=founder]{ctex}
\usepackage{anyfontsize}
\usepackage{float}
%图片
\usepackage{graphicx,caption,subcaption}
%数学公式
\usepackage{amsmath,amssymb,mathabx}
%表格
\usepackage{multirow}
%算法
\usepackage{algorithm,algorithmicx,algpseudocode}
%引用
\usepackage{hyperref}
%插入代码
\usepackage{listings}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{mathtools}
%流程图
\usepackage{tikz}
\usetikzlibrary{positioning, shapes.geometric}

%图片路径
\graphicspath{{../figures/}}
%插入代码配置
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}

\lstset{
	language=C++, % 设置语言
	basicstyle=\ttfamily, % 设置字体族
	breaklines=true, % 自动换行
	keywordstyle=\bfseries\color{NavyBlue}, % 设置关键字为粗体，颜色为 NavyBlue
	morekeywords={}, % 设置更多的关键字，用逗号分隔
	emph={self}, % 指定强调词，如果有多个，用逗号隔开
	emphstyle=\bfseries\color{Rhodamine}, % 强调词样式设置
	commentstyle=\itshape\color{black!50!white}, % 设置注释样式，斜体，浅灰色
	stringstyle=\bfseries\color{PineGreen!90!black}, % 设置字符串样式
	columns=flexible,
	numbers=left, % 显示行号在左边
	numbersep=2em, % 设置行号的具体位置
	numberstyle=\footnotesize, % 缩小行号
	frame=single, % 边框
	framesep=1em % 设置代码与边框的距离
}

%	breakatwhitespace = false,
%	captionpos = b,
%	extendedchars = false,
%	keepspaces=true,
%	rulecolor=\color{black},
%	showspaces=false,
%	showstringspaces=false,
%	showtabs=false,
%	stepnumber=1,
%	tabsize=2,
%	title=\lstname


%算法配置
\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}

\title{\textbf{数据结构实验报告}}
\author{姚苏航\qquad PB22061220}
\date{}


% Document
\begin{document}
	\maketitle


	\section{问题描述}\label{sec:des}

	\subsection{实验题目}\label{subsec:q}
	{{利用哈希表统计两源程序的相似性。}}

	\subsection{基本要求}\label{subsec:req}
	{{对于两个C语言的源程序清单，
	用哈希表的方法分别统计两程序中使用C语言关键字的情况，
	并最终按定量的计算结果，得出两份源程序的相似性。}}

	\subsection{测试数据}\label{subsec:test}
	{{事先给出的file文件夹，包含关键词表和三份源程序文件，程序之间有相近的和差别大的。
	文件内容详见附录~\ref{sec:appendix2}。}}


	\section{需求分析}\label{sec:need}

	\noindent{1.扫描给定的源程序，累计在每个源程序中 C 语言关键字出现的频度
		(为保证查找效率，建议自建哈希表的平均查找长度不大于2)，
		通过这种方式扫描两个源程序，提取其特征向量。}

	\noindent{2.通过计算向量Xi和Xj的相似值来判断对应两个程序的相似性，
	相似值的判别函数计算公式为:}
	\begin{equation}
		S(X_i,X_j)=\frac{X_i^T\cdot X_j}{|X_i|\cdot|X_j|}\label{eq:equation}
	\end{equation}
	\noindent{\;\;\,\ 通过这种方式，可以初步判断两个源程序的相似性，
	如图1所示。其中 S 反映了两向量的夹角的余弦，当 S 趋近于 1 时，
	两向量夹角趋于 0 ，即两向量趋于相似，反之亦然。}
	\begin{figure}[htbp]
		\centering
		\includegraphics[height=120pt]{S}
		\caption{Similarity}
	\end{figure}

	\noindent{3.在有些情况下，S 不能很好地反映两向量的相似性，还需要进一步的考虑。
	例如，在 S 接近于 1 时，两向量的模的差距不能很好地被反映，如图2所示。
	因此引入几何距离 D ，用于反应两向量终点间的距离。}
	\begin{figure}[htbp]
		\centering
		\includegraphics[height=120pt]{D}
		\caption{Distance}
	\end{figure}

	\noindent{4.通过分别比较很相近和差别很大的三个源代码，实践这种方法的有效性。}


	\section{概要设计}\label{sec:design1}
	\input{schematic design}


	\section{详细设计}\label{sec:design2}
	\input{Detailed design}


	\section{调试分析}\label{sec:debug}
	\input{Debugging Analysis}


	\section{使用说明}\label{sec:instrut}
	{{用户将事先准备好的关键词表(keyword.txt)和需要统计相似性的程序放入file文件夹中，
	运行时程序将通过关键词表建立哈希表，并通过查找哈希表构建两程序的向量，
	最后通过判别函数计算两程序相似性和向量的几何距离。}}

	{{在本项目中，使用事先给出的测试数据，
	准备三个编译和运行都无误的C程序，程序之间有相近的和差别大的，
	通过similar.c和different.c两个程序与main.c进行比较，
	可以直观展现出比较的效果。}}


	\section{测试结果}\label{sec:result}
	\input{Test results}


	\section{实验源代码文件}\label{sec:appendix1}
	{{为方便查看，附录中的链接文件均为txt格式}}
	\input{Experimental source code files}


	\section{实验用测试文件}\label{sec:appendix2}
	\input{Test files for experiments}

\end{document}
